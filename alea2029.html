<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Message & Minuteur</title>

  <style>
    :root {
      --primary: #0984e3; /* bleu uni */
      --danger: #d63031;
      --background: #f5f6fa;
      --card: #ffffff;
      --text: #2d3436;
    }
  
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: var(--background);
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      color: var(--text);
    }
  
    .container {
      background: var(--card);
      max-width: 420px;
      width: 100%;
      padding: 24px;
      border-radius: 16px;
      text-align: center;
    }
  
    h1 {
      font-size: 1rem;
      font-weight: 400;
      line-height: 1.4;
      margin-bottom: 20px;
    }
  
    #timer {
      font-size: 3rem;
      font-weight: bold;
      color: var(--danger);
      margin: 20px 0 30px;
    }

    #message {
      white-space: pre-line;
      text-align: left;
    }
  
    .btn {
      display: inline-block;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 999px;
      padding: 14px 26px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.15s ease, transform 0.1s ease;
    }
  
    .btn:active {
      transform: scale(0.97);
    }
  
    .btn:focus {
      outline: none;
    }

    
  </style>
</head>

<body>

  <div class="container">
    <h1 id="message"></h1>
    <div id="timer"></div>

    <button class="btn">Code couleur</button>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);

    const message = params.get("message") || 
    `Une inondation paralyse votre site principal de ROUBAIX. La production est à l’arrêt et entraîne une perte de CA. Votre second site, à Nantes, fonctionne à 90% de sa capacité de production.  
    Vous consultez un expert qui vous annonce une interruption de 2 jours et qui, après étude des projections climatiques sur votre site, conclue que ce type d’événements sera amené à se reproduire. 
    
    Météo France annonce d’ailleurs de nouvelles inondations dans les semaines à venir. 

    Vos plus gros clients vous font comprendre que les pièces détachées peuvent être livrées avec un léger retard dans les conditions initiales de production. Ils vous demandent de faire un geste commercial. 
    Vous devez trouver des solutions pour adapter votre activité à ces aléas climatiques et augmenter la résilience de votre site. `;

    const duration = parseInt(params.get("time")) || 600;

    document.getElementById("message").textContent = message;

    let time = duration;
    const timerElement = document.getElementById("timer");

    function updateTimer() {
      const minutes = Math.floor(time / 60);
      const seconds = time % 60;
      timerElement.textContent =
        String(minutes).padStart(2, '0') + ":" +
        String(seconds).padStart(2, '0');
      time--;

      if (time < 0) {
        timerElement.textContent = "⏱ Temps écoulé";
        clearInterval(interval);
      }
    }

    updateTimer();
    const interval = setInterval(updateTimer, 1000);
  </script>

</body>
</html>
